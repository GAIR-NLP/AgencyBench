{
  "subtask_count": 5,
  "subtask1": "Query:\nCreate a static Jump-a-Jump launch pad that renders a centered 720×480 stage with a floating avatar, the current platform, and the next platform preview. Include a neon `#launch-btn` labelled `Prime Jump` near the upper left and an `#instruction-card` describing how to charge and release jumps. Automatically call `window.app.initializeStage()` on load so reviewers immediately see the scaffold.\nDeliverables:\n- `index.html` linking `styles.css` and `app.js` via relative paths plus containers `#jump-stage`, `#instruction-card`, and `#launch-btn`.\n- `styles.css` defining the exact 720px by 480px stage, centering it vertically and horizontally within ±6px, and styling the avatar/platform shapes with high-contrast gradients.\n- `app.js` exposing `window.app` with methods `initializeStage()` and `describeStage()`; `describeStage()` returns `{ launchButton, avatar, platforms }` where `platforms` maps `\"current\"` and `\"next\"` to `{ \"x\": number, \"y\": number }` viewport coordinates.\nRubric:\n- Stage geometry: automation captures `stage_layout.png` and verifies `#jump-stage` is exactly 720±4px by 480±4px, centered within ±6px, and shows two distinct platform elements plus the avatar.\n- Controls placement: `describeStage().launchButton` must report `{ \"x\": 96±6, \"y\": 96±6 }` while `platforms.current.y` sits within 40±6px of the stage vertical midpoint.\n- DOM contract: the page must render `#jump-stage`, `#instruction-card`, `#launch-btn`, and child elements with classes `.platform` and `.avatar`.\n- API bootstrapping: calling `window.app.initializeStage()` twice must be idempotent and populate `describeStage()` with both platform coordinates.",
  "subtask2": "Query:\nWire up hold-and-release jumping and telemetry. When visitors press the stage the `#charge-meter` should fill, releasing triggers a jump animation from the avatar to the next platform, swaps the platforms, and updates `#status-panel` text (`Ready` → `Charging` → `Jump landed`/`Jump failed`). Highlight the most recent landing by positioning `#last-landing` as a pulsing ring around the active platform. Keep all assets from subtask1.\nDeliverables:\n- Continue shipping `index.html`, `styles.css`, and `app.js`, adding `#charge-meter` and `#status-panel` beneath the stage.\n- Extend `window.app` with `debugRun()` returning `{ phase, jumps }` and `setDemoJumps(sequence)` where `sequence` is an array of `{ \"id\": string, \"holdMs\": number, \"target\": \"near\"|\"far\", \"result\": \"landed\"|\"missed\" }`. When invoked the sequence should play automatically for automation and log to `debugRun().jumps`.\nRubric:\n- Turn logic: automation feeds `setDemoJumps([{id:\"pad-1\",holdMs:280,target:\"near\",result:\"landed\"},{id:\"pad-2\",holdMs:360,target:\"far\",result:\"landed\"},{id:\"pad-2\",holdMs:360,target:\"far\",result:\"landed\"}])`. `debugRun().jumps` must contain only the first two unique jumps and leave the third attempt unchanged.\n- Landing halo: after the second valid jump `#last-landing` must wrap the new platform with a 34±3px animated ring captured in `charge_cycle.webm`.\n- Status flow: `#status-panel` must read `Ready` on load, switch to `Charging` when automation plays the first scripted jump, and end on `Jump landed` for the accepted attempts.\n- Layout regression: screenshot metrics from subtask1 must remain within the same tolerances.",
  "subtask3": "Query:\nTrack combos, scoring, and a replay timeline. Persist every landing in `run.log` using `timestamp,holdMs,target,result,distance`. Add toolbar `#controls` containing buttons `button[data-action=\"rewind\"]`, `button[data-action=\"fast-forward\"]`, and `button[data-action=\"replay\"]` beneath the status row. Show a `#combo-banner` announcing current streaks and disable manual jumps while replays run. Automation will seed the combo via `setDemoJumps`.\nDeliverables:\n- Keep the base three files and add `run.log`.\n- Expand `window.app` with `rewind()`, `fastForward()`, `startReplay()`, `checkLandingStatus()`, and `exportRunLog()` returning the log contents as text.\nRubric:\n- Combo scenario: automation seeds the jumps `near, far, near, far, near`. After the final landing `checkLandingStatus()` must return `\"combo\"` and `#combo-banner` displays `Perfect chain!` while locking pointer interactions.\n- Replay controls: clicking the toolbar buttons (rewind → fast-forward → replay) must modify the avatar position accordingly and produce `replay.webm` showing the timeline at ≥300ms per hop.\n- Logging: `run.log` must append one comma-separated line per jump plus replay markers (if any). `exportRunLog()` returns the exact file content.\n- Continuity: `debugRun()`, the landing halo, and layout guarantees from subtasks 1–2 continue to work.",
  "subtask4": "Query:\nAdd a persistence drawer for runs. Introduce a panel `#persistence` under the controls that houses buttons `#save-run`, `#load-run`, `#reset-session` plus a read-only `<textarea id=\"state-json\">`. Saving writes the current run JSON to the textarea and `localStorage['jump-session-state']`. Loading replays the JSON into the stage, scoreboard, and combo banner. Reset clears the stage but retains totals in `#scoreboard` with counters `.best-distance`, `.perfect-landings`, `.misses`.\nDeliverables:\n- Continue shipping the three primary files. Style the persistence panel to match the neon stage aesthetic.\n- Extend `window.app` with `serializeSession()`, `applySession(serialized)`, `resetSession()`, and `getMilestones()` returning `{ best: number, perfect: number, fails: number }`. The latest save must auto-load on refresh.\nRubric:\n- Save flow: after scripted jumps, pressing `#save-run` updates `#state-json` with JSON containing a `jumps` array and writes the same payload to `localStorage['jump-session-state']`. `serializeSession()` must match exactly.\n- Restore flow: invoking `resetSession()` empties the stage while keeping milestone counters. Calling `applySession()` with the previously saved JSON rebuilds avatar position, halo, and `debugRun().jumps`.\n- Scoreboard: when `checkLandingStatus()` reports `combo` followed by `resetSession()`, `getMilestones()` increments `perfect` without touching `fails`. Text in `.perfect-landings` and `.misses` must mirror the same numbers.\n- Regression: replay, logging, and layout guarantees from subtasks 1–3 remain satisfied.",
  "subtask5": "Query:\nLayer a diagnostics sidebar and challenge fixtures to stress-test persistence. Add toggle `#toggle-diagnostics` that slides a right-aligned `<aside id=\"diagnostics\">` into view showing depth, total jumps, elapsed milliseconds, and a table with headers `Metric` and `Value`. Load challenge data from `run_cases.json` containing at least two entries with `id`, `label`, `script`, and `result` fields. Provide playback controls within the sidebar for previewing each challenge.\nDeliverables:\n- Keep existing files and ship `run_cases.json`. The sidebar must also list aggregated stats for the active game (distance traveled, longest streak, fail count) in a structured list.\n- Extend `window.app` with `loadChallenge(id)`, `playChallenge(id, options)`, `getDiagnostics()`, `summarizeChallenge(id)`, and `estimateEngineLoad()`. `playChallenge` should return a Promise that resolves after playback and blocks manual jumps until finished.\nRubric:\n- Challenge import: calling `loadChallenge(0)` positions the avatar per the fixture, updates `#combo-banner` using `result`, and logs the scripted jumps. `summarizeChallenge(0)` returns total hops plus the furthest distance for each difficulty tier.\n- Playback: `playChallenge(1, { intervalMs: 220 })` replays the script with ≥200ms spacing while reusing the persistence guards and re-enabling manual jumping after completion.\n- Diagnostics: when the sidebar is open, `getDiagnostics()` supplies keys `depth`, `elapsedMs`, `nodes`, and `topLines` (array). The table remains 260±6px wide and offset 60±6px from the right edge, captured in `diagnostics.png`.\n- Stability: calling `estimateEngineLoad()` five times in succession yields non-decreasing integers ≤64000000. All expectations from subtasks 1–4 continue to hold."
}
