{
  "metadata": {
    "subtask_count": 5,
    "categories": [
      "User Authentication & Data Persistence",
      "Social/Graph Feature Implementation",
      "Core Application Logic Implementation (e.g., Chat)",
      "Advanced Data Filtering & Sorting",
      "Concurrency, Threading & Data Consistency"
    ]
  },
  "query": "Project: Advanced C++ Console Chat System \n\nGeneral Rules: \n- All code should be placed under workspace/. \n- Use g++ -std=c++17 for compilation. \n- Each task must provide a clear startup command. \n- Functionality expands step by step, with increasing difficulty (from simple UI data persistence friend relationship graph chat history indexing concurrency and consistency). \n\nSubtask 1 — Login & Registration System \nDescription: Implement a command-line login/registration interface. \n- Users can register an account (username + password), data is saved to a file (local persistence). \n- On login, the password must be verified. \n- After successful login, the user enters the main menu (prompt). \nRun: \ncd workspace \nmake task1 \n./bin/chat_app \nSuccess Criteria: Able to register a new user and log in again with the same credentials after restarting the program. \n\nSubtask 2 — Friend Management & Chat Entry \nDescription: Extend Task 1 with: \n- Support adding/removing friends. \n- Display the friend list (with status: online/offline). \n- Select a friend to enter the chat interface (chat not yet implemented). \nRun: \ncd workspace \nmake task2 \n./bin/chat_app \nSuccess Criteria: Able to add/remove friends, and the friend list persists across program restarts. \n\nSubtask 3 — Single Chat Function + Chat History Storage \nDescription: Implement a real single chat interface. \n- When chatting with a friend, the user can input and \"send\" messages. \n- Simulated replies are automatically generated from a preset script. \n- Chat history is stored locally (one history file per friend). \n- Support the /history command to view chat history (with pagination). \nRun: \ncd workspace \nmake task3 \n./bin/chat_app \nSuccess Criteria: Able to send messages, receive simulated replies, and view past chat history after program restart. \n\nSubtask 4 — Advanced Features: Friend Alias + Global Search \nDescription: Extend Task 3 with: \n- Support setting an alias (nickname) for friends. The alias is displayed in the chat interface and friend list instead of the system ID. \n- Implement a global chat history search engine: input a keyword to search across all friends' chat histories, highlighting matching snippets. \n- Search must support fuzzy matching (case-insensitive, partial string match). \nRun: \ncd workspace \nmake task4 \n./bin/chat_app \nSuccess Criteria: Able to set and save friend aliases, and use /search hello to find messages containing the keyword. \n\nSubtask 5 — Concurrent Chat Simulation + Message Consistency \nDescription: Extend Task 4 with a concurrent message system (local simulation). \n- Each friend has a background thread that periodically generates simulated messages (mimicking real chat). \n- The main thread handles UI and user input. \n- A thread-safe queue must be used to store messages, ensuring no loss or disorder. \n- Chat history files must guarantee consistent writes (no data loss or duplication, even if the program exits unexpectedly). \nRun: \ncd workspace \nmake task5 \n./bin/chat_app \nSuccess Criteria: Able to chat with multiple friends simultaneously, with real-time auto messages, and consistent chat histories without disorder or data loss."
}